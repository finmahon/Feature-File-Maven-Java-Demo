@test
Feature: Retrieve Account Balance
  Background:
    Given The following users are valid
      | Username | Password    | UserType      |
      | Bill     | password123 | manager    |
      | Betty    | password123 | supervisor |
      | Bob      | password123 | user       |
    And these accounts exist
      | AccountNum | AccountLevel | Balance |
      | 11111       | 2   | 99      |
      | 22222       | 1 | 999     |
      | 33333       | 0 | 9999    | 
  
  Scenario Outline: Supervisor should only access accounts at auth level 1
    Given I am a supervisor
    When I login with credentials
      | Username | Password           |
      | Betty     | password123 |
    And I request balance for <accountnumber> from the accounts API
    Then I should get <balance> as the response

    Examples:
      | accountnumber | balance           |
      | 11111         | Not Authorised                |
      | 22222         | 999              |
      | 33333         | 9999                |
      | 44444         | Account Not Found                |
 